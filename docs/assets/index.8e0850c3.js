var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,s=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,o=(e,o)=>{for(var l in o||(o={}))t.call(o,l)&&s(e,l,o[l]);if(a)for(var l of a(o))n.call(o,l)&&s(e,l,o[l]);return e};import{f as l,i,g as c,h as r,t as d,d as p,a as h,s as u,b as _,u as m,e as w,c as v,j as y,l as f,k as b,m as k,n as g,o as L,p as x,q as C,r as S,z as E,v as $,w as D,x as O,y as N,A as j,B as I,C as R,D as P,E as U,F as A}from"./vendor.a791b3e2.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,o)=>{const l=new URL(e,n);if(self[t].moduleMap[l])return a(self[t].moduleMap[l]);const i=new Blob([`import * as m from '${l}';`,`${t}.moduleMap['${l}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(i),onerror(){o(new Error(`Failed to import: ${e}`)),s(c)},onload(){a(self[t].moduleMap[l]),s(c)}});document.head.appendChild(c)})),self[t].moduleMap={}}}("/assets/");var M="_app_1v48h_1";var V={dateLabel:"_dateLabel_hokwy_1",heading:"_heading_hokwy_9",ping:"_ping_hokwy_1",counter:"_counter_hokwy_17",newCases:"_newCases_hokwy_1",totalLabel:"_totalLabel_hokwy_1",deathLabel:"_deathLabel_hokwy_1",newDeaths:"_newDeaths_hokwy_1",deathSwitch:"_deathSwitch_hokwy_1",caseSwitch:"_caseSwitch_hokwy_1",circle:"_circle_hokwy_54",axis:"_axis_hokwy_59",calAxis:"_calAxis_hokwy_63",switches:"_switches_hokwy_67",bounce:"_bounce_hokwy_1",selected:"_selected_hokwy_76",legend:"_legend_hokwy_80",legends:"_legends_hokwy_1",legendLabel:"_legendLabel_hokwy_90",control:"_control_hokwy_95",label:"_label_hokwy_99",controls:"_controls_hokwy_1",cal:"_cal_hokwy_63",calendarLabel:"_calendarLabel_hokwy_107",calendar:"_calendar_hokwy_107",calendarContainer:"_calendarContainer_hokwy_1",slider:"_slider_hokwy_1",button:"_button_hokwy_127",mapContainer:"_mapContainer_hokwy_1",playback:"_playback_hokwy_1",playContainer:"_playContainer_hokwy_1",map:"_map_hokwy_1",mapSvg:"_mapSvg_hokwy_1",title:"_title_hokwy_1",popup:"_popup_hokwy_1",popupLabel:"_popupLabel_hokwy_1"};let F;const B={},T=function(e,t){if(!t)return e();if(void 0===F){const e=document.createElement("link").relList;F=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in B)return;B[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":F,t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e()))},z=l(",d"),Y=(e,t)=>{const a=i(parseInt(e),parseInt(t));return function(e){this.textContent=z(a(e))}},G=c(),q=({attributes:{d:e,eventListeners:t}})=>r("path",{className:"states",stroke:"#ccc","stroke-width":1,"stroke-linejoin":"round","vector-effect":"non-scaling-stroke",fill:"none",d:G(e),eventListeners:t}),W=({attributes:{d:e,eventListeners:t}})=>r("path",{className:"counties","vector-effect":"non-scaling-stroke",stroke:"none",fill:e.fill||"",d:G(e.feature)||"",eventListeners:t}),X=()=>r("div",{id:V.popup},r("p",{id:V.populLabel})),H=d("%m-%d-%Y")("1-22-2020"),J=new Date,Z=p.range(H,J),K=6*Z.length,Q={viewBox:[0,0,K,100],id:V.slider};var ee=-1;const te=({attributes:{eventListener:e}})=>{const t=m().domain(w(Z)).range([0,K]),a=u(r("svg",o(o({},Q),{eventListener:["click",function(e){const a=this.createSVGPoint();a.x=e.clientX,a.y=e.clientY;const n=a.matrixTransform(this.getScreenCTM().inverse()),s=t.invert(n.x);ee=v(Z,s);const o=y().ease(f),l={detail:{counter:ee,t:o}};window.dispatchEvent(new CustomEvent("tick",l)),u("circle").transition(o).attr("cx",6*ee)}]}))),n=a.append((()=>r("g",null)));return n.append((()=>r("g",{transform:"translate(0, 44)",className:V.axis}))).call(b(t).ticks()),n.insert((()=>r("circle",{transform:"translate(0, 44)",className:V.circle,r:12}))).call(k().on("drag",(function(t){u(this).attr("cx",(()=>{const a=t.x;if(a<0)return 0;if(a>K)return K;const n=parseInt(a/6);return e(n),a}))}))),a.node()},ae=()=>{let e="stop";return h((()=>{if("start"==e&&ee<=Z.length){ee++;const e=y().duration(500).ease(f);u("circle").transition(e).attr("cx",6*ee);const t={detail:{t:e,counter:ee}};window.dispatchEvent(new CustomEvent("tick",t))}ee>Z.length&&(e="stop",u(`.${V.button}`).text("start"==e?"stop":"start"))}),500),r(_,null,r("div",{id:V.controls},r("div",{id:V.startContainer},r("button",{className:V.button,eventListener:["click",function(){e="start"==e?"stop":"start",u(this).text("start"==e?"stop":"start")}]},"start")),r(te,{eventListener:t=>{e="stop",u(`.${V.button}`).text("start"==e?"stop":"start");const a={detail:{counter:ee=t,t:null}};window.dispatchEvent(new CustomEvent("tick",a))}})),r("div",{id:V.calendarContainer}))},ne=g("%m/%d/%y");let se;const oe={eventListeners:[["mouseleave",e=>u(le).transition().style("opacity",0)],["mouseover",function(e){const t=u(this),a=this.getBoundingClientRect(),[[n,s]]=t.data();u(le).transition().duration(0).style("opacity",.75).style("top",a.top+window.scrollY-72+"px").style("left",`${a.left+32}px`).select("p").text(`${ne(n)} : ${s}`)}],["click",function(){const e=u(this),[[t,a]]=e.data();(e=>{ee=e;const t=y().ease(f),a={detail:{counter:ee,t:t}};window.dispatchEvent(new CustomEvent("tick",a)),u("circle").transition(t).attr("cx",6*ee)})(S(se,t))}]]},le=r(X,null);document.body.appendChild(le);const ie=x(L().domain(["Sun","Mon","Tue","Wed","Th","Fri","Sat"]).range([0,129])).tickSize(0).ticks(7),ce=({children:e,attributes:{d:t,color:a}})=>{se=t.map((([e,t])=>e));const n=w(se),s=18.5*(C.count(...n)+1)+40,l=u(r("svg",o(o({},{width:s,height:148,viewBox:[0,0,s,148]}),{className:V.calendar}))),i=l.append((()=>r("g",{transform:"translate(36, 0)"}))),c=m().domain(n).range([0,s-40]),d=b(c).tickSize(0).ticks(12);l.append((()=>r("g",{transform:"translate(34, 0)",className:V.calAxis}))).call(ie).select(".domain").remove(),l.append((()=>r("g",{transform:"translate(36, 132)",className:V.calAxis}))).call(d).select(".domain").remove();const p=(e,t)=>{i.selectAll("rect").data(e,(([e,t])=>e)).join((e=>e.append((([e,t])=>r("rect",o({fill:a(t),width:18,height:18,x:18.5*C.count(n[0],e),y:18.5*e.getDay()},oe)))).call((e=>(null!=t?e.transition(t).attr("opacity",1):e.attr("opacity",1),e)))),(e=>e),(e=>e.call((e=>e.transition(t).attr("opacity",0).remove()))))};return p([]),window.addEventListener("tick",(e=>{const a=e.detail.counter+1,n=e.detail.t,s=[...t];s.splice(a),p(s,n)})),r(_,null,r("div",{className:V.calendarLabel},e),l.node())},re=c(),de=[1,1e4],pe=d("%m/%d/%y"),he=r(X,null);document.body.appendChild(he);const ue=u(r("svg",o({},{viewBox:[0,0,975,610],id:V.mapSvg}))),_e=ue.append("g"),me=E().scaleExtent([1,12]).on("zoom",(({transform:e})=>{_e.attr("transform",e)}));ue.call(me);const we={eventListeners:[["click",function(e){const t=u(this).data()[0].feature,[[a,n],[s,o]]=re.bounds(t);ue.transition().duration(750).call(me.transform,A.translate(487.5,305).scale(Math.min(8,.9/Math.max((s-a)/975,(o-n)/610))).translate(-(a+s)/2,-(n+o)/2))}],["mouseleave",e=>u(he).transition().style("opacity",0)],["mouseover",function(e){const[t]=u(this).data();u(he).transition().duration(0).style("opacity",.75).style("top",e.clientY-100+"px").style("left",`${e.clientX+24}px`).select("p").text(t.label)}]]};(async()=>{const{default:e}=await T((()=>__import__("./population.c35c5e6c.js")),void 0),{default:t}=await T((()=>__import__("./counties-albers-10m.4f8a6ef5.js")),void 0);let a="cases",n=0;const s=$(R).domain(de),l=$(D).domain([1,1e3]),i=(e,t)=>{_e.selectAll("path.counties").data(e,(e=>e.id)).join((e=>e.append((e=>r(W,o({d:e,fill:"cases"==a?e.fill:e.deathFill},we))))),(e=>e.call((e=>e.transition(t).style("fill",(e=>"cases"==a?e.fill:e.deathFill)).style("stroke",(e=>"cases"==a?e.fill:e.deathFill))))),(e=>e.call((e=>e.transition(t).style("opacity",0).remove()))))},c=y().ease(f);i([],c);const d=O(t,t.objects.states).features;_e.selectAll("path.states").data(d,(e=>e.properties.name)).join((e=>e.append((e=>r(q,{d:e,eventListeners:[["click",e=>console.log(e)]]})))));const p=O(t,t.objects.counties).features,h=await fetch("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv"),m=await h.text(),w=await fetch("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv"),v=await w.text(),b=e.slice(1).map((([e,t,a])=>[`${t}${a}`,+e])),k=new Map(b),g=N(m),L=N(v),x=j(p,(e=>e.id)),C=g[0],S=Object.keys(C).filter(pe),E=j(L,(e=>e.UID.slice(3))),A=S.map((e=>[e,g.map((t=>{const a=t.UID.slice(3),n=+t[e]||0,o=+k.get(a)||0,i=(x.get(a)||[])[0]||{properties:{}},c=i.properties.name,r=n/o*1e5,d=t.Province_State,p=`${c} County, ${d}`,h=s(r),u=+E.get(a)[0][e]||0,_=u/o*1e5;return{id:a,cases:r,feature:i,label:p,state:d,pop:o,total:n,fill:h,totalDeaths:u,deathsPerCap:_,deathFill:l(_)}}))])),M=S.map(pe),F=[],B=[],z=[],G=[],X=[],H=[];A.forEach(((e,t)=>{const a=I(e[1],(e=>e.total)),n=I(e[1],(e=>e.totalDeaths));F.push(a),G.push(n);const s=a-(F[t-1]||0);B.push(s);const o=n-(G[t-1]||0);z.push(o);const l=M[t];X.push([l,s]),H.push([l,o])}));const J=(e,t)=>{const a=A[e],n=pe(a[0]).toLocaleDateString(),s=U(`#${V.dateLabel}`).text(),o=F[e-1]||0,l=F[e]||0,i=B[e]||0,c=B[e-1]||0,r=G[e-1]||0,d=G[e]||0,p=z[e]||0,h=z[e-1]||0;return n!=s&&(U(`#${V.dateLabel}`).text(n),U(`#${V.totalLabel}`).transition(t).tween("text",(()=>Y(o,l))),U(`#${V.deathLabel}`).transition(t).tween("text",(()=>Y(r,d))),U(`#${V.newDeaths}`).transition(t).tween("text",(()=>Y(h,p))),U(`#${V.newCases}`).transition(t).tween("text",(()=>Y(c,i)))),a[1]};i(J(0,c),c),_e.selectAll("path.states").raise(),window.addEventListener("tick",(e=>{const t=e.detail.counter;if(t>=A.length)return;n=t;const a=e.detail.t,s=J(t,a);i(s,a)})),window.addEventListener("toggle",(e=>{a=e.detail.state;const t=y().ease(f),s={detail:{counter:n,t:t}};window.dispatchEvent(new CustomEvent("tick",s))}));const Z=$(R).domain([1,P(B)]),K=$(D).domain([1,P(z)]),Q=()=>r(_,null,r("div",{className:V.cal},r(ce,{d:X,color:Z},r("label",null,"new cases"),r("h1",{id:V.newCases},"0"))),r("div",{className:V.cal},r(ce,{d:H,color:K,title:"new deaths"},r("label",null,"new deaths"),r("h1",{id:V.newDeaths},"0"))));u(`#${V.calendarContainer}`).append((()=>r(Q,null)))})();var ve=r(_,null,ue.node());const ye=e=>{const t=document.createElement("canvas"),a=t.getContext("2d");t.style.width=320,t.style.height=44;for(let n=0;n<320;++n)a.fillStyle=e(n/319),a.fillRect(n,0,1,44);return t},fe=({attributes:{domain:e,width:t,color:a,label:n}})=>{const s=u(r("svg",{className:V.legend,viewBox:[0,0,320,44]}));s.append((()=>r("image",{x:0,y:0,width:t,height:44,preserveAspectRatio:"none",href:ye(a).toDataURL()})));const o=$(a).domain(e).range([0,t]).nice();return s.append((()=>r("g",{transform:"translate(0, 20)",className:V.axis}))).call(b(o).ticks(5,"~s")),s.append((()=>r("g",{transform:"translate(0, -8)"}))).append((()=>r("text",{className:V.legendLabel}))).text(n),s.node()};let be="cases";const ke=()=>r(_,null,r("div",{id:V.map},r("div",{id:V.legends},r("div",{className:V.counter},r("h1",{id:V.title},"COVIZ-19"),r("label",null,"total cases"),r("h1",{id:V.totalLabel},"0"),r("label",null,"total deaths"),r("h1",{id:V.deathLabel},"0")),r("div",{className:V.control},r("button",{id:V.caseSwitch,className:`${V.switches} ${V.selected}`,eventListener:["click",function(){"cases"!=be&&(be="cases",u(this).classed(V.selected,!0),u(`#${V.deathSwitch}`).classed(V.selected,!1),window.dispatchEvent(new CustomEvent("toggle",{detail:{state:be}})))}]},r("h1",null,"Cases")),r(fe,{domain:[1,1e4],width:320,color:R,label:"COVID-19 cases per 100k"})),r("div",{className:V.control},r("button",{id:V.deathSwitch,className:`${V.switches}`,eventListener:["click",function(){"deaths"!=be&&(be="deaths",u(this).classed(V.selected,!0),u(`#${V.caseSwitch}`).classed(V.selected,!1),window.dispatchEvent(new CustomEvent("toggle",{detail:{state:be}})))}]},r("h1",null,"Deaths")),r(fe,{domain:[1,1e3],width:320,color:D,label:"COVID-19 deaths per 100k"}))),r("div",{id:V.mapContainer},ve)),r("div",{id:V.playback},r("h1",{id:V.dateLabel},"1/22/2020"),r(ae,null)));var ge="_footer_1ud2w_3";const Le=()=>r("div",{className:ge},r("p",null,"created by ",r("a",{href:"https://github.com/ScottORLY/coviz19"},"Scott Orlyck")),r("h4",null,"Data:"),r("p",null,r("a",{href:"https://github.com/CSSEGISandData/COVID-19"},"COVID-19 Data Repository by the Center for Systems Science and Engineering (CSSE) at Johns Hopkins University")),r("p",null,r("a",{href:"https://api.census.gov/data/2018/pep/population?get=POP&for=county"},"US Census")));console.log("hello world"),document.body.appendChild(r("div",{id:M},r(ke,null),r(Le,null)));
