var t=Object.defineProperty,e=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(e,a,s)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,l=(t,e)=>{for(var a in e||(e={}))n.call(e,a)&&i(t,a,e[a]);if(s)for(var a of s(e))o.call(e,a)&&i(t,a,e[a]);return t},c=(t,s)=>e(t,a(s));import{f as r,i as d,g as p,h,t as u,d as _,a as w,s as m,b as v,u as y,e as f,c as b,j as k,l as g,k as x,m as C,n as L,o as S,p as E,q as D,r as $,z as O,v as N,w as I,x as j,y as P,A,B as V,C as R,D as U,E as z,F as B}from"./vendor.55caa80b.js";var F="_app_1v48h_1";var T={heading:"_heading_hokwy_9",dateLabel:"_dateLabel_hokwy_1",ping:"_ping_hokwy_1",counter:"_counter_hokwy_17",totalLabel:"_totalLabel_hokwy_1",newCases:"_newCases_hokwy_1",deathLabel:"_deathLabel_hokwy_1",newDeaths:"_newDeaths_hokwy_1",deathSwitch:"_deathSwitch_hokwy_1",caseSwitch:"_caseSwitch_hokwy_1",circle:"_circle_hokwy_54",axis:"_axis_hokwy_59",calAxis:"_calAxis_hokwy_63",switches:"_switches_hokwy_67",bounce:"_bounce_hokwy_1",selected:"_selected_hokwy_76",legend:"_legend_hokwy_80",legends:"_legends_hokwy_1",legendLabel:"_legendLabel_hokwy_90",control:"_control_hokwy_95",label:"_label_hokwy_99",controls:"_controls_hokwy_1",calendarLabel:"_calendarLabel_hokwy_107",cal:"_cal_hokwy_63",calendar:"_calendar_hokwy_107",calendarContainer:"_calendarContainer_hokwy_1",slider:"_slider_hokwy_1",button:"_button_hokwy_127",mapContainer:"_mapContainer_hokwy_1",playback:"_playback_hokwy_1",playContainer:"_playContainer_hokwy_1",map:"_map_hokwy_1",mapSvg:"_mapSvg_hokwy_1",title:"_title_hokwy_1",popup:"_popup_hokwy_1",popupLabel:"_popupLabel_hokwy_1"};let M;const Y={},G=function(t,e){if(!e)return t();if(void 0===M){const t=document.createElement("link").relList;M=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if(t in Y)return;Y[t]=!0;const e=t.endsWith(".css"),a=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${a}`))return;const s=document.createElement("link");return s.rel=e?"stylesheet":M,e||(s.as="script",s.crossOrigin=""),s.href=t,document.head.appendChild(s),e?new Promise(((t,e)=>{s.addEventListener("load",t),s.addEventListener("error",e)})):void 0}))).then((()=>t()))},q=r(",d"),W=(t,e)=>{const a=d(parseInt(t),parseInt(e));return function(t){this.textContent=q(a(t))}},X=p(),H=({attributes:{d:t,eventListeners:e}})=>h("path",{className:"states",stroke:"#ccc","stroke-width":1,"stroke-linejoin":"round","vector-effect":"non-scaling-stroke",fill:"none",d:X(t),eventListeners:e}),J=({attributes:{d:t,eventListeners:e}})=>h("path",{className:"counties","vector-effect":"non-scaling-stroke",stroke:"none",fill:t.fill||"",d:X(t.feature)||"",eventListeners:e}),Z=()=>h("div",{id:T.popup},h("p",{id:T.populLabel})),K=u("%m-%d-%Y")("1-22-2020"),Q=new Date,tt=_.range(K,Q),et=6*tt.length,at={viewBox:[0,0,et,100],id:T.slider};var st=-1;const nt=({attributes:{eventListener:t}})=>{const e=y().domain(f(tt)).range([0,et]),a=m(h("svg",c(l({},at),{eventListener:["click",function(t){const a=this.createSVGPoint();a.x=t.clientX,a.y=t.clientY;const s=a.matrixTransform(this.getScreenCTM().inverse()),n=e.invert(s.x);st=b(tt,n);const o=k().ease(g),i={detail:{counter:st,t:o}};window.dispatchEvent(new CustomEvent("tick",i)),m("circle").transition(o).attr("cx",6*st)}]}))),s=a.append((()=>h("g",null)));return s.append((()=>h("g",{transform:"translate(0, 44)",className:T.axis}))).call(x(e).tickSize(0).ticks(12)),s.insert((()=>h("circle",{transform:"translate(0, 44)",className:T.circle,r:12}))).call(C().on("drag",(function(e){m(this).attr("cx",(()=>{const a=e.x;if(a<0)return 0;if(a>et)return et;const s=parseInt(a/6);return t(s),a}))}))),a.node()},ot=()=>{let t="stop";return w((()=>{if("start"==t&&st<=tt.length){st++;const t=k().duration(500).ease(g);m("circle").transition(t).attr("cx",6*st);const e={detail:{t:t,counter:st}};window.dispatchEvent(new CustomEvent("tick",e))}st>tt.length&&(t="stop",m(`.${T.button}`).text("start"==t?"stop":"start"))}),500),h(v,null,h("div",{id:T.controls},h("div",{id:T.startContainer},h("button",{className:T.button,eventListener:["click",function(){t="start"==t?"stop":"start",m(this).text("start"==t?"stop":"start")}]},"start")),h(nt,{eventListener:e=>{t="stop",m(`.${T.button}`).text("start"==t?"stop":"start");const a={detail:{counter:st=e,t:null}};window.dispatchEvent(new CustomEvent("tick",a))}})),h("div",{id:T.calendarContainer}))},it=L("%m/%d/%y");let lt;const ct={eventListeners:[["mouseleave",t=>m(rt).transition().style("opacity",0)],["mouseover",function(t){const e=m(this),a=this.getBoundingClientRect(),[[s,n]]=e.data();m(rt).transition().duration(0).style("opacity",.75).style("top",a.top+window.scrollY-72+"px").style("left",`${a.left+32}px`).select("p").text(`${it(s)} : ${n}`)}],["click",function(){const t=m(this),[[e,a]]=t.data();(t=>{st=t;const e=k().ease(g),a={detail:{counter:st,t:e}};window.dispatchEvent(new CustomEvent("tick",a)),m("circle").transition(e).attr("cx",6*st)})($(lt,e))}]]},rt=h(Z,null);document.body.appendChild(rt);const dt=E(S().domain(["Sun","Mon","Tue","Wed","Th","Fri","Sat"]).range([0,129])).tickSize(0).ticks(7),pt=({children:t,attributes:{d:e,color:a}})=>{lt=e.map((([t,e])=>t));const s=f(lt),n=18.5*(D.count(...s)+1)+40,o=m(h("svg",c(l({},{width:n,height:148,viewBox:[0,0,n,148]}),{className:T.calendar}))),i=o.append((()=>h("g",{transform:"translate(36, 0)"}))),r=y().domain(s).range([0,n-40]),d=x(r).tickSize(0).ticks(12);o.append((()=>h("g",{transform:"translate(34, 0)",className:T.calAxis}))).call(dt).select(".domain").remove(),o.append((()=>h("g",{transform:"translate(36, 132)",className:T.calAxis}))).call(d).select(".domain").remove();const p=(t,e)=>{i.selectAll("rect").data(t,(([t,e])=>t)).join((t=>t.append((([t,e])=>h("rect",l({fill:a(e),width:18,height:18,x:18.5*D.count(s[0],t),y:18.5*t.getDay()},ct)))).call((t=>(null!=e?t.transition(e).attr("opacity",1):t.attr("opacity",1),t)))),(t=>t),(t=>t.call((t=>t.transition(e).attr("opacity",0).remove()))))};return p([]),window.addEventListener("tick",(t=>{const a=t.detail.counter+1,s=t.detail.t,n=[...e];n.splice(a),p(n,s)})),h(v,null,h("div",{className:T.calendarLabel},t),o.node())},ht=p(),ut=[1,1e4],_t=u("%m/%d/%y"),wt=h(Z,null);document.body.appendChild(wt);const mt=m(h("svg",l({},{viewBox:[0,0,975,610],id:T.mapSvg}))),vt=mt.append("g"),yt=O().scaleExtent([1,12]).on("zoom",(({transform:t})=>{vt.attr("transform",t)}));mt.call(yt);const ft={eventListeners:[["click",function(t){const e=m(this).data()[0].feature,[[a,s],[n,o]]=ht.bounds(e);mt.transition().duration(750).call(yt.transform,B.translate(487.5,305).scale(Math.min(8,.9/Math.max((n-a)/975,(o-s)/610))).translate(-(a+n)/2,-(s+o)/2))}],["mouseleave",t=>m(wt).transition().style("opacity",0)],["mouseover",function(t){const[e]=m(this).data();m(wt).transition().duration(0).style("opacity",.75).style("top",t.clientY-100+"px").style("left",`${t.clientX+24}px`).select("p").text(e.label)}]]};(async()=>{const{default:t}=await G((()=>import("./population.c35c5e6c.js")),void 0),{default:e}=await G((()=>import("./counties-albers-10m.4f8a6ef5.js")),void 0);let a="cases",s=0;const n=N(R).domain(ut),o=N(I).domain([1,1e3]),i=(t,e)=>{vt.selectAll("path.counties").data(t,(t=>t.id)).join((t=>t.append((t=>h(J,l({d:t,fill:"cases"==a?t.fill:t.deathFill},ft))))),(t=>t.call((t=>t.transition(e).style("fill",(t=>"cases"==a?t.fill:t.deathFill)).style("stroke",(t=>"cases"==a?t.fill:t.deathFill))))),(t=>t.call((t=>t.transition(e).style("opacity",0).remove()))))},c=k().ease(g);i([],c);const r=j(e,e.objects.states).features;vt.selectAll("path.states").data(r,(t=>t.properties.name)).join((t=>t.append((t=>h(H,{d:t,eventListeners:[["click",t=>console.log(t)]]})))));const d=j(e,e.objects.counties).features,p=await fetch("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv"),u=await p.text(),_=await fetch("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv"),w=await _.text(),y=t.slice(1).map((([t,e,a])=>[`${e}${a}`,+t])),f=new Map(y),b=P(u),x=P(w),C=A(d,(t=>t.id)),L=b[0],S=Object.keys(L).filter(_t),E=A(x,(t=>t.UID.slice(3))),D=S.map((t=>[t,b.map((e=>{const a=e.UID.slice(3),s=+e[t]||0,i=+f.get(a)||0,l=(C.get(a)||[])[0]||{properties:{}},c=l.properties.name,r=s/i*1e5,d=e.Province_State,p=`${c} County, ${d}`,h=n(r),u=+E.get(a)[0][t]||0,_=u/i*1e5;return{id:a,cases:r,feature:l,label:p,state:d,pop:i,total:s,fill:h,totalDeaths:u,deathsPerCap:_,deathFill:o(_)}}))])),$=S.map(_t),O=[],B=[],F=[],M=[],Y=[],q=[];D.forEach(((t,e)=>{const a=V(t[1],(t=>t.total)),s=V(t[1],(t=>t.totalDeaths));O.push(a),M.push(s);const n=a-(O[e-1]||0);B.push(n);const o=s-(M[e-1]||0);F.push(o);const i=$[e];Y.push([i,n]),q.push([i,o])}));const X=(t,e)=>{const a=D[t],s=_t(a[0]).toLocaleDateString(),n=z(`#${T.dateLabel}`).text(),o=O[t-1]||0,i=O[t]||0,l=B[t]||0,c=B[t-1]||0,r=M[t-1]||0,d=M[t]||0,p=F[t]||0,h=F[t-1]||0;return s!=n&&(z(`#${T.dateLabel}`).text(s),z(`#${T.totalLabel}`).transition(e).tween("text",(()=>W(o,i))),z(`#${T.deathLabel}`).transition(e).tween("text",(()=>W(r,d))),z(`#${T.newDeaths}`).transition(e).tween("text",(()=>W(h,p))),z(`#${T.newCases}`).transition(e).tween("text",(()=>W(c,l)))),a[1]};i(X(0,c),c),vt.selectAll("path.states").raise(),window.addEventListener("tick",(t=>{const e=t.detail.counter;if(e>=D.length)return;s=e;const a=t.detail.t,n=X(e,a);i(n,a)})),window.addEventListener("toggle",(t=>{a=t.detail.state;const e=k().ease(g),n={detail:{counter:s,t:e}};window.dispatchEvent(new CustomEvent("tick",n))}));const Z=N(R).domain([1,U(B)]),K=N(I).domain([1,U(F)]),Q=()=>h(v,null,h("div",{className:T.cal},h(pt,{d:Y,color:Z},h("label",null,"new cases"),h("h1",{id:T.newCases},"0"))),h("div",{className:T.cal},h(pt,{d:q,color:K,title:"new deaths"},h("label",null,"new deaths"),h("h1",{id:T.newDeaths},"0"))));m(`#${T.calendarContainer}`).append((()=>h(Q,null)))})();var bt=h(v,null,mt.node());const kt=t=>{const e=document.createElement("canvas"),a=e.getContext("2d");e.style.width=320,e.style.height=44;for(let s=0;s<320;++s)a.fillStyle=t(s/319),a.fillRect(s,0,1,44);return e},gt=({attributes:{domain:t,width:e,color:a,label:s}})=>{const n=m(h("svg",{className:T.legend,viewBox:[0,0,320,44]}));n.append((()=>h("image",{x:0,y:0,width:e,height:44,preserveAspectRatio:"none",href:kt(a).toDataURL()})));const o=N(a).domain(t).range([0,e]).nice();return n.append((()=>h("g",{transform:"translate(0, 20)",className:T.axis}))).call(x(o).ticks(5,"~s")),n.append((()=>h("g",{transform:"translate(0, -8)"}))).append((()=>h("text",{className:T.legendLabel}))).text(s),n.node()};let xt="cases";const Ct=()=>h(v,null,h("div",{id:T.map},h("div",{id:T.legends},h("div",{className:T.counter},h("h1",{id:T.title},"COVIZ-19"),h("label",null,"total cases"),h("h1",{id:T.totalLabel},"0"),h("label",null,"total deaths"),h("h1",{id:T.deathLabel},"0")),h("div",{className:T.control},h("button",{id:T.caseSwitch,className:`${T.switches} ${T.selected}`,eventListener:["click",function(){"cases"!=xt&&(xt="cases",m(this).classed(T.selected,!0),m(`#${T.deathSwitch}`).classed(T.selected,!1),window.dispatchEvent(new CustomEvent("toggle",{detail:{state:xt}})))}]},h("h1",null,"Cases")),h(gt,{domain:[1,1e4],width:320,color:R,label:"COVID-19 cases per 100k"})),h("div",{className:T.control},h("button",{id:T.deathSwitch,className:`${T.switches}`,eventListener:["click",function(){"deaths"!=xt&&(xt="deaths",m(this).classed(T.selected,!0),m(`#${T.caseSwitch}`).classed(T.selected,!1),window.dispatchEvent(new CustomEvent("toggle",{detail:{state:xt}})))}]},h("h1",null,"Deaths")),h(gt,{domain:[1,1e3],width:320,color:I,label:"COVID-19 deaths per 100k"}))),h("div",{id:T.mapContainer},bt)),h("div",{id:T.playback},h("h1",{id:T.dateLabel},"1/22/2020"),h(ot,null)));var Lt="_footer_1ud2w_3";const St=()=>h("div",{className:Lt},h("p",null,"created by ",h("a",{href:"https://github.com/ScottORLY/coviz19"},"Scott Orlyck")),h("h4",null,"Data:"),h("p",null,h("a",{href:"https://github.com/CSSEGISandData/COVID-19"},"COVID-19 Data Repository by the Center for Systems Science and Engineering (CSSE) at Johns Hopkins University")),h("p",null,h("a",{href:"https://api.census.gov/data/2018/pep/population?get=POP&for=county"},"US Census")));document.body.appendChild(h("div",{id:F},h(Ct,null),h(St,null)));
